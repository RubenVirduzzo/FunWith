<section class="container container-search d-flex justify-content-center">
  <% if current_user %>
    <div>
      <%= form_with(scope: :search, url: events_url, method: "get") do |form| %>
        <div class="container-search-bar">
          <div class="search-bar">
            <div>
                <%= form.text_field :organizer, placeholder: "Organizer" %>
            </div>

            <div class="date">
                <%= form.date_field :date %>
            </div>

            <div data-controller="maps">
              <%= form_with(model: @location) do |f| %>
                <div id="searchBoxContainer" style="overflow:hidden;">
                  <%= form.text_field :place, placeholder: "Place", autocomplete:"off", id: "searchBox", class: "text-center"%>
                </div>
                  <%= f.text_field :latitude, id: "place_latitude", data: {"maps-target": "latitude"}, class: "d-none" %>
                  <%= f.text_field :longitude, id: "place_longitude", data: {"maps-target": "longitude"}, class: "d-none" %>
              <% end %>
              <div data-maps-target="myMap" class="map" style="display:none;"></div>
            </div>

            <div class="w-100 ml-2 mr-2">
              <%= form.submit "Search", class: "submit w-100 text-white border" %>
            </div>
          </div>
        </div>
        <div class="d-flex">
          <div class="availables">
            <%= check_box_tag( "search[available]",  true ) %>
            <%= label "search[available]", "availables" %>         
          </div>
          <div class="availables">
            <%= check_box_tag( "search[follows]",  true ) %>
            <%= label "search[follows]", "follows", class:"mb-5" %>         
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</section>